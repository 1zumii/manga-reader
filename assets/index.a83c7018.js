import{e as I,o as N,a as _,b as $,f as L,s as i,t as h,h as b,j as m,k as R,l as y,c as v,i as E,S}from"./index.5a1d1ff1.js";import{U as w}from"./url-transformer.6b2c128d.js";const p="_root_chu01_1",M="_image_chu01_36",P="_loading_chu01_43",f={root:p,image:M,loading:P},k=h("<div><img>"),U=e=>{const[t,r]=I("load");N(()=>r("loading"));const a=()=>{r("load"),e.onLoaded?.()},o=()=>{r("error"),e.onError?.()};return(()=>{const s=k(),d=s.firstChild;return d.addEventListener("error",o),d.addEventListener("load",a),_(n=>{const c=f.image,x={[f.loading]:t()==="loading"},g=e.src,l=e.alt,u=e.id;return c!==n._v$&&$(s,n._v$=c),n._v$2=L(s,x,n._v$2),g!==n._v$3&&i(d,"src",n._v$3=g),l!==n._v$4&&i(d,"alt",n._v$4=l),u!==n._v$5&&i(d,"data-id",n._v$5=u),n},{_v$:void 0,_v$2:void 0,_v$3:void 0,_v$4:void 0,_v$5:void 0}),s})()},V=e=>JSON.stringify(e,Object.keys(e).sort()),j=()=>{const e=R();if(!Number.isNaN(Number.parseInt(e.chapterIndex,10))&&!Number.isNaN(Number.parseInt(e.pageIndex,10)))return{mangaId:e.mangaId,chapterIndex:Number.parseInt(e.chapterIndex,10),pageIndex:Number.parseInt(e.pageIndex,10)}},C=()=>{const e=b(),[t]=I(j()),r=m(()=>e.state!=="ready"?[]:t()?[]:[]),a=m(()=>{if(e.state!=="ready")return;const o=t();if(!!o)return e().find(s=>s.id===o.mangaId)});return{displayPageImages:r,currentReading:t,info:a,resourceState:e.state,isLoading:e.loading}},O="_read-view_v2xka_1",A={readView:O},J=h("<div>"),z=()=>{const{info:e,isLoading:t}=C();y(()=>{console.log("\u{1F680}",e())});const r=a=>{console.log(a)};return v(S,{when:!t,get children(){const a=J();return a.addEventListener("scroll",r),E(a,v(U,{get src(){return w.getPageImage({mangaId:e().id,chapterIndex:14,pageIndex:5})},get id(){return V({mangaId:e().id,chapterIndex:14,pageIndex:5})},onLoaded:()=>{console.log("lll")}})),_(()=>$(a,A.readView)),a}})};export{z as default};
